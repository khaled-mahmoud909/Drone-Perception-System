<launch>

    <include file="$(find rosbridge_server)/launch/rosbridge_websocket.launch" />

    <!-- ============== 1. LAUNCH PERCEPTION STACK ============== -->
    <!-- (Camera, TF, Odometry, Map Manager, Detector) -->
    <!-- This part includes all the nodes needed to produce the map -->
    <include file="$(find my_drone)/launch/perception_stack.launch" />

    <!-- ============== 2. LAUNCH THE EXPLORATION PLANNER ============== -->
    <!-- Load the parameters for the planner -->
    <rosparam file="$(find my_drone)/config/dep_param.yaml" ns="/DEP" />
    <rosparam file="$(find my_drone)/config/poly_planner_param.yaml" />
    
    <!-- Launch the exploration planner node -->
    <node pkg="my_drone" type="controlled_opt_explor_plan_node" name="controlled_opt_explor_plan_node" output="screen" />

    <!-- ============== 3. CONTROLLER ============== -->
    <rosparam file="$(find my_drone)/config/controller_param.yaml" ns="controller"/>
    <node pkg="tracking_controller" type="tracking_controller_node" name="tracking_controller_node" output="screen" />

    <node pkg="my_drone" type="pixhawk_listener.py" name="latency_test_node" output="screen" />


    <!-- ============== 4. VISUALIZATION ============== -->
   <!--  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find my_drone)/rviz/exploration.rviz" required="true"/> -->
</launch>
